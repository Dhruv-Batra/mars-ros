syntax = "proto3";

package jetsonrpc;

service JetsonRPC {
  rpc SendMotorCmd (stream MotorCmd) returns (Void);
  
  rpc StreamIMU (Void) returns (stream IMUData);
  rpc EndIMU (Void) returns (Void);

  rpc StreamImage (Void) returns (stream Image);
  rpc EndImage (Void) returns (Void);

  rpc StreamMotorCurrent (Void) returns (stream MotorCurrent);
  rpc EndMotorCurrent (Void) returns (Void);
}

message Void {}

message MotorCmd {
  fixed32 values = 1;
}
message MotorCurrent {
  fixed64 values = 1;
}

// dummy IMU data
message IMUData {
  float m1 = 1;
}

message Image {
    string encoding = 1;
    bytes data = 2;
}