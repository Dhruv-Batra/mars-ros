syntax = "proto3";

package jetsonrpc;

service JetsonRPC {
  rpc SendMotorCmd (stream MotorCmd) returns (Void);
  rpc SendTwist (stream Twist) returns (Void);
  
  rpc StreamIMU (Rate) returns (stream IMUData);
  rpc StreamImage (Rate) returns (stream Image);
  rpc StreamMotorCurrent (Rate) returns (stream MotorCurrent);
  rpc StreamAngle (Rate) returns (stream ArmAngle);
}

message Void {}

message MotorCmd {
  fixed32 values = 1;
}

message Twist {
  repeated float values = 1;
}

message MotorCurrent {
  // 8 bytes packed in values
  fixed64 values = 1;
}

message ArmAngle {
  int32 angle = 1;
}

message IMUData {
  repeated float values = 1;
}

message Rate {
  int32 rate = 1;
}

message Image {
    string encoding = 1;
    bytes data = 2;
}